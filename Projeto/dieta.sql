-- MySQL Script generated by MySQL Workbench
-- 10/06/16 15:43:26
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema Dieta
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `Dieta` ;

-- -----------------------------------------------------
-- Schema Dieta
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Dieta` DEFAULT CHARACTER SET utf8 ;
USE `Dieta` ;

-- -----------------------------------------------------
-- Table `Dieta`.`tb_user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`tb_user` (
  `idt_user` INT NOT NULL AUTO_INCREMENT,
  `nme_user` VARCHAR(45) NOT NULL,
  `num_password` VARCHAR(45) NOT NULL,
  `val_cpf` VARCHAR(45) NOT NULL,
  `nme_email` VARCHAR(45) NOT NULL,
  `num_phone` VARCHAR(45) NOT NULL,
  `val_weight` DOUBLE NOT NULL,
  `val_height` DOUBLE NOT NULL,
  `val_age` INT NOT NULL,
  `admin` TINYINT(1) NOT NULL,
  PRIMARY KEY (`idt_user`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`tb_objective`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`tb_objective` (
  `idt_objective` INT NOT NULL AUTO_INCREMENT,
  `nme_objective` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idt_objective`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`tb_diet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`tb_diet` (
  `idt_diet` INT NOT NULL AUTO_INCREMENT,
  `dat_init` DATE NULL,
  `dat_final` DATE NULL,
  `val_ideal_weight` DOUBLE NOT NULL,
  `cod_objective` INT NOT NULL,
  PRIMARY KEY (`idt_diet`),
  INDEX `fk_Dieta_Objetivo1_idx` (`cod_objective` ASC),
  CONSTRAINT `fk_Dieta_Objetivo1`
    FOREIGN KEY (`cod_objective`)
    REFERENCES `Dieta`.`tb_objective` (`idt_objective`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`tb_food`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`tb_food` (
  `idt_food` INT NOT NULL AUTO_INCREMENT,
  `nme_food` VARCHAR(45) NOT NULL,
  `val_calories` DOUBLE NOT NULL,
  `val_weight` DOUBLE NOT NULL,
  PRIMARY KEY (`idt_food`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`tb_location`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`tb_location` (
  `idt_location` INT NOT NULL AUTO_INCREMENT,
  `cord_longitude` DOUBLE NOT NULL,
  `cord_latitude` DOUBLE NOT NULL,
  PRIMARY KEY (`idt_location`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`Usuario_has_Dieta`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`Usuario_has_Dieta` (
  `idUsuario_has_Dieta` INT NOT NULL,
  PRIMARY KEY (`idUsuario_has_Dieta`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`td_user_diet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`td_user_diet` (
  `cod_user` INT NOT NULL,
  `cod_diet` INT NOT NULL,
  INDEX `fk_Usuario_has_Dieta1_Dieta1_idx` (`cod_diet` ASC),
  INDEX `fk_Usuario_has_Dieta1_Usuario1_idx` (`cod_user` ASC),
  CONSTRAINT `fk_Usuario_has_Dieta1_Usuario1`
    FOREIGN KEY (`cod_user`)
    REFERENCES `Dieta`.`tb_user` (`idt_user`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Usuario_has_Dieta1_Dieta1`
    FOREIGN KEY (`cod_diet`)
    REFERENCES `Dieta`.`tb_diet` (`idt_diet`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`td_diet_food`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`td_diet_food` (
  `cod_diet` INT NOT NULL,
  `cod_food` INT NOT NULL,
  INDEX `fk_tb_dieta_has_tb_alimento_tb_alimento1_idx` (`cod_food` ASC),
  INDEX `fk_tb_dieta_has_tb_alimento_tb_dieta1_idx` (`cod_diet` ASC),
  CONSTRAINT `fk_tb_dieta_has_tb_alimento_tb_dieta1`
    FOREIGN KEY (`cod_diet`)
    REFERENCES `Dieta`.`tb_diet` (`idt_diet`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tb_dieta_has_tb_alimento_tb_alimento1`
    FOREIGN KEY (`cod_food`)
    REFERENCES `Dieta`.`tb_food` (`idt_food`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Dieta`.`td_food_location`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Dieta`.`td_food_location` (
  `cod_food` INT NOT NULL,
  `cod_location` INT NOT NULL,
  INDEX `fk_tb_alimento_has_tb_localizacao_tb_localizacao1_idx` (`cod_location` ASC),
  INDEX `fk_tb_alimento_has_tb_localizacao_tb_alimento1_idx` (`cod_food` ASC),
  CONSTRAINT `fk_tb_alimento_has_tb_localizacao_tb_alimento1`
    FOREIGN KEY (`cod_food`)
    REFERENCES `Dieta`.`tb_food` (`idt_food`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tb_alimento_has_tb_localizacao_tb_localizacao1`
    FOREIGN KEY (`cod_location`)
    REFERENCES `Dieta`.`tb_location` (`idt_location`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `Dieta`.`tb_user`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`tb_user` (`idt_user`, `nme_user`, `num_password`, `val_cpf`, `nme_email`, `num_phone`, `val_weight`, `val_height`, `val_age`, `admin`) VALUES (1, 'Higo Soares', 'higo', '020202020', 'higo@gmail.com', '33434332', 55, 1.69, 20, true);
INSERT INTO `Dieta`.`tb_user` (`idt_user`, `nme_user`, `num_password`, `val_cpf`, `nme_email`, `num_phone`, `val_weight`, `val_height`, `val_age`, `admin`) VALUES (2, 'Gustavo Oliveira', 'gustavo', '123456789', 'gustavo@gmail.com', '22222222', 70.2, 1.55, 25, false);
INSERT INTO `Dieta`.`tb_user` (`idt_user`, `nme_user`, `num_password`, `val_cpf`, `nme_email`, `num_phone`, `val_weight`, `val_height`, `val_age`, `admin`) VALUES (3, 'Amado Batista', 'amado', '987654321', 'amado@gmail.com', '33333333', 91.6, 1.80, 30, false);
INSERT INTO `Dieta`.`tb_user` (`idt_user`, `nme_user`, `num_password`, `val_cpf`, `nme_email`, `num_phone`, `val_weight`, `val_height`, `val_age`, `admin`) VALUES (4, 'Bruno Lima', 'bruno', '616283818', 'bruno@gmail.com', '44444444', 67, 1.70, 35, false);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`tb_objective`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`tb_objective` (`idt_objective`, `nme_objective`) VALUES (1, 'Hipertrofia');
INSERT INTO `Dieta`.`tb_objective` (`idt_objective`, `nme_objective`) VALUES (2, 'Perda de peso');
INSERT INTO `Dieta`.`tb_objective` (`idt_objective`, `nme_objective`) VALUES (3, 'Reducao alimentar');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`tb_diet`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`tb_diet` (`idt_diet`, `dat_init`, `dat_final`, `val_ideal_weight`, `cod_objective`) VALUES (1, '2016-09-17', '2016-09-17', 66, 1);
INSERT INTO `Dieta`.`tb_diet` (`idt_diet`, `dat_init`, `dat_final`, `val_ideal_weight`, `cod_objective`) VALUES (2, '2016-01-20', '2016-07-20', 68.5, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`tb_food`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`tb_food` (`idt_food`, `nme_food`, `val_calories`, `val_weight`) VALUES (1, 'Abacaxi', 200, 200);
INSERT INTO `Dieta`.`tb_food` (`idt_food`, `nme_food`, `val_calories`, `val_weight`) VALUES (2, 'Banana', 300, 100);
INSERT INTO `Dieta`.`tb_food` (`idt_food`, `nme_food`, `val_calories`, `val_weight`) VALUES (3, 'Pao Integral', 100, 200);
INSERT INTO `Dieta`.`tb_food` (`idt_food`, `nme_food`, `val_calories`, `val_weight`) VALUES (4, 'Peito de Frango', 200, 100);
INSERT INTO `Dieta`.`tb_food` (`idt_food`, `nme_food`, `val_calories`, `val_weight`) VALUES (5, 'Batata Doce', 150, 100);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`tb_location`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`tb_location` (`idt_location`, `cord_longitude`, `cord_latitude`) VALUES (1, -2.323123, -0.28282);
INSERT INTO `Dieta`.`tb_location` (`idt_location`, `cord_longitude`, `cord_latitude`) VALUES (2, -9.282872, -0.22222);
INSERT INTO `Dieta`.`tb_location` (`idt_location`, `cord_longitude`, `cord_latitude`) VALUES (3, -8.231231, -0.23333);
INSERT INTO `Dieta`.`tb_location` (`idt_location`, `cord_longitude`, `cord_latitude`) VALUES (4, -9.272722, 9.222222);
INSERT INTO `Dieta`.`tb_location` (`idt_location`, `cord_longitude`, `cord_latitude`) VALUES (5, -1.123123, -0.72727);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`td_user_diet`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`td_user_diet` (`cod_user`, `cod_diet`) VALUES (1, 1);
INSERT INTO `Dieta`.`td_user_diet` (`cod_user`, `cod_diet`) VALUES (2, 1);
INSERT INTO `Dieta`.`td_user_diet` (`cod_user`, `cod_diet`) VALUES (3, 2);
INSERT INTO `Dieta`.`td_user_diet` (`cod_user`, `cod_diet`) VALUES (4, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`td_diet_food`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`td_diet_food` (`cod_diet`, `cod_food`) VALUES (1, 1);
INSERT INTO `Dieta`.`td_diet_food` (`cod_diet`, `cod_food`) VALUES (1, 2);
INSERT INTO `Dieta`.`td_diet_food` (`cod_diet`, `cod_food`) VALUES (2, 3);
INSERT INTO `Dieta`.`td_diet_food` (`cod_diet`, `cod_food`) VALUES (2, 4);
INSERT INTO `Dieta`.`td_diet_food` (`cod_diet`, `cod_food`) VALUES (2, 5);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Dieta`.`td_food_location`
-- -----------------------------------------------------
START TRANSACTION;
USE `Dieta`;
INSERT INTO `Dieta`.`td_food_location` (`cod_food`, `cod_location`) VALUES (1, 1);
INSERT INTO `Dieta`.`td_food_location` (`cod_food`, `cod_location`) VALUES (2, 2);
INSERT INTO `Dieta`.`td_food_location` (`cod_food`, `cod_location`) VALUES (3, 3);
INSERT INTO `Dieta`.`td_food_location` (`cod_food`, `cod_location`) VALUES (4, 4);
INSERT INTO `Dieta`.`td_food_location` (`cod_food`, `cod_location`) VALUES (5, 5);

COMMIT;

